{% extends 'base.html' %}

{% block title %}Task Mapping: {{ mapping.task_type_id }} - Minibini{% endblock %}

{% block navigation %}
{% include 'includes/settings_navigation.html' %}
{% endblock %}

{% block content %}
<h2>Task Mapping: {{ mapping.task_type_id }}</h2>

<table border="1">
    <tr><th>Task Type ID</th><td>{{ mapping.task_type_id }}</td></tr>
    <tr><th>Step Type</th><td>{{ mapping.get_step_type_display }}</td></tr>
    <tr><th>Mapping Strategy</th><td>{{ mapping.get_mapping_strategy_display }}</td></tr>
    <tr><th>Default Product Type</th><td>{{ mapping.default_product_type|default:"-" }}</td></tr>
    <tr><th>Line Item Name</th><td>{{ mapping.line_item_name|default:"-" }}</td></tr>
    <tr><th>Line Item Description</th><td>{{ mapping.line_item_description|default:"-" }}</td></tr>
    <tr><th>Output Line Item Type</th><td>{% if mapping.output_line_item_type %}{{ mapping.output_line_item_type.name }} ({{ mapping.output_line_item_type.code }}){% else %}-{% endif %}</td></tr>
    <tr><th>Breakdown of Task</th><td>{{ mapping.breakdown_of_task|default:"-" }}</td></tr>
</table>

<p>
    <a href="{% url 'jobs:task_mapping_edit' mapping.pk %}">Edit</a> |
    <a href="{% url 'jobs:task_mapping_delete' mapping.pk %}" style="color: #dc3545;">Delete</a> |
    <a href="{% url 'jobs:task_mapping_list' %}">Back to List</a>
</p>

<h3>Linked Task Templates</h3>
{% if linked_templates %}
<p>These templates use this mapping:</p>
<ul>
    {% for template in linked_templates %}
    <li>{{ template.template_name }}</li>
    {% endfor %}
</ul>
{% else %}
<p>No task templates are using this mapping yet.</p>
{% endif %}

{% endblock %}
